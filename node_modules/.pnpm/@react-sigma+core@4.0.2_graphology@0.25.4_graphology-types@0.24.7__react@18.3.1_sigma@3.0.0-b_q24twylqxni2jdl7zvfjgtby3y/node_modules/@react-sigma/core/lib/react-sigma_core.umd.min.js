!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("graphology"),require("sigma")):"function"==typeof define&&define.amd?define(["exports","react","graphology","sigma"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["@react-sigma/core"]={},e.React,e.Graph,e.sigma)}(this,(function(e,t,n,a){"use strict";function r(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var c=r(t);const s=t.createContext(null),l=s.Provider;function o(){const e=t.useContext(s);if(null==e)throw new Error("No context provided: useSigmaContext() can only be used in a descendant of <SigmaContainer>");return e}function i(){return o().sigma}function u(){const{sigma:e,container:n}=o(),[a,r]=t.useState({});return t.useEffect((()=>{if(!e||!a)return;const t={};return Object.keys(a).forEach((n=>{t[n]=a[n],e.setSetting(n,a[n])})),()=>{e&&n&&n.offsetWidth>0&&n.offsetHeight>0&&Object.keys(t).forEach((n=>{e.setSetting(n,t[n])}))}}),[e,a,n]),r}const d=["clickNode","rightClickNode","downNode","enterNode","leaveNode","doubleClickNode","wheelNode","clickEdge","rightClickEdge","downEdge","enterEdge","leaveEdge","doubleClickEdge","wheelEdge","clickStage","rightClickStage","downStage","doubleClickStage","wheelStage","beforeRender","afterRender","kill"],g=["click","rightClick","mouseup","mousedown","mousemove","mousemovebody","doubleClick","wheel"],f=["touchup","touchdown","touchmove"],m=["updated"];function h(){const e=i(),n=u(),[a,r]=t.useState({});return t.useEffect((()=>{if(!e||!a)return;const t=a,n=Object.keys(t);return n.forEach((n=>{const a=t[n];d.find((e=>e===n))&&e.on(n,a),g.find((e=>e===n))&&e.getMouseCaptor().on(n,a),f.find((e=>e===n))&&e.getTouchCaptor().on(n,a),m.find((e=>e===n))&&e.getCamera().on(n,a)})),()=>{e&&n.forEach((n=>{const a=t[n];d.find((e=>e===n))&&e.off(n,a),g.find((e=>e===n))&&e.getMouseCaptor().off(n,a),f.find((e=>e===n))&&e.getTouchCaptor().off(n,a),m.find((e=>e===n))&&e.getCamera().off(n,a)}))}}),[e,a,n]),r}function v(){return Math.random().toString(36).slice(2)}function p(e,t){if(e===t)return!0;if("object"==typeof e&&null!=e&&"object"==typeof t&&null!=t){if(Object.keys(e).length!=Object.keys(t).length)return!1;for(const n in e){if(!Object.hasOwn(t,n))return!1;if(!p(e[n],t[n]))return!1}return!0}return!1}function b(e){const n=i(),[a,r]=t.useState(e||{});t.useEffect((()=>{p(a,e||{})||r(e||{})}),[e]);const c=t.useCallback((e=>{n.getCamera().animatedZoom(Object.assign(Object.assign({},a),e))}),[n,a]),s=t.useCallback((e=>{n.getCamera().animatedUnzoom(Object.assign(Object.assign({},a),e))}),[n,a]),l=t.useCallback((e=>{n.getCamera().animatedReset(Object.assign(Object.assign({},a),e))}),[n,a]),o=t.useCallback(((e,t)=>{n.getCamera().animate(e,Object.assign(Object.assign({},a),t))}),[n,a]),u=t.useCallback(((e,t)=>{const r=n.getNodeDisplayData(e);r?n.getCamera().animate(r,Object.assign(Object.assign({},a),t)):console.log(`Node ${e} not found`)}),[n,a]);return{zoomIn:c,zoomOut:s,reset:l,goto:o,gotoNode:u}}function E(e){const n=o(),[a,r]=t.useState(!1),[c,s]=t.useState(e||n.container),l=()=>r((e=>!e));t.useEffect((()=>(document.addEventListener("fullscreenchange",l),()=>document.removeEventListener("fullscreenchange",l))),[l]),t.useEffect((()=>{s(e||n.container)}),[e,n.container]);return{toggle:t.useCallback((()=>{var e;e=c,document.fullscreenElement!==e?e.requestFullscreen():document.exitFullscreen&&document.exitFullscreen()}),[c]),isFullScreen:a}}const w=(y=({graph:e,id:r,className:c,style:s,settings:o={},children:i},u)=>{const d=t.useRef(null),g=t.useRef(null),f={className:`react-sigma ${c||""}`,id:r,style:s},[m,h]=t.useState(null),[v,b]=t.useState(o);t.useEffect((()=>{p(v,o)||b(o)}),[o]),t.useEffect((()=>{let t=null;if(null!==g.current){let r=new n;e&&(r="function"==typeof e?new e:e),t=new a.Sigma(r,g.current,v),m&&t.getCamera().setState(m.getCamera().getState())}return h(t),()=>{t&&t.kill(),h(null)}}),[g,e,v]),t.useImperativeHandle(u,(()=>m),[m]);const E=t.useMemo((()=>m&&d.current?{sigma:m,container:d.current}:null),[m,d.current]),w=null!==E?t.createElement(l,{value:E},i):null;return t.createElement("div",Object.assign({},f,{ref:d}),t.createElement("div",{className:"sigma-container",ref:g}),w)},t.forwardRef(y));var y;var C;function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},O.apply(this,arguments)}var j,_=function(e){return c.createElement("svg",O({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"plus-solid_svg__svg-inline--fa plus-solid_svg__fa-plus plus-solid_svg__fa-w-14","data-icon":"plus","data-prefix":"fas",viewBox:"0 0 448 512",width:"1em",height:"1em"},e),C||(C=c.createElement("path",{fill:"currentColor",d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32"})))};function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},S.apply(this,arguments)}var x,k=function(e){return c.createElement("svg",S({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"minus-solid_svg__svg-inline--fa minus-solid_svg__fa-minus minus-solid_svg__fa-w-14","data-icon":"minus","data-prefix":"fas",viewBox:"0 0 448 512",width:"1em",height:"1em"},e),j||(j=c.createElement("path",{fill:"currentColor",d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32"})))};function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},N.apply(this,arguments)}var H=function(e){return c.createElement("svg",N({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"dot-circle-regular_svg__svg-inline--fa dot-circle-regular_svg__fa-dot-circle dot-circle-regular_svg__fa-w-16","data-icon":"dot-circle","data-prefix":"far",viewBox:"0 0 512 512",width:"1em",height:"1em"},e),x||(x=c.createElement("path",{fill:"currentColor",d:"M256 56c110.532 0 200 89.451 200 200 0 110.532-89.451 200-200 200-110.532 0-200-89.451-200-200 0-110.532 89.451-200 200-200m0-48C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8m0 168c-44.183 0-80 35.817-80 80s35.817 80 80 80 80-35.817 80-80-35.817-80-80-80"})))};var M;function $(){return $=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},$.apply(this,arguments)}var F,P=function(e){return c.createElement("svg",$({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"expand-solid_svg__svg-inline--fa expand-solid_svg__fa-expand expand-solid_svg__fa-w-14","data-icon":"expand","data-prefix":"fas",viewBox:"0 0 448 512",width:"1em",height:"1em"},e),M||(M=c.createElement("path",{fill:"currentColor",d:"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12M288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12m148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12M160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12"})))};function z(){return z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},z.apply(this,arguments)}var G=function(e){return c.createElement("svg",z({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"compress-solid_svg__svg-inline--fa compress-solid_svg__fa-compress compress-solid_svg__fa-w-14","data-icon":"compress","data-prefix":"fas",viewBox:"0 0 448 512",width:"1em",height:"1em"},e),F||(F=c.createElement("path",{fill:"currentColor",d:"M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12m-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24m0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12m192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12"})))};e.ControlsContainer=({id:e,className:n,style:a,children:r,position:c="bottom-left"})=>{const s={className:`react-sigma-controls ${n||""} ${c}`,id:e,style:a};return t.createElement("div",Object.assign({},s),r)},e.FullScreenControl=({id:e,className:n,style:a,container:r,children:c,labels:s={}})=>{const{isFullScreen:l,toggle:o}=E(null==r?void 0:r.current),i={className:`react-sigma-control ${n||""}`,id:e,style:a};return document.fullscreenEnabled?t.createElement("div",Object.assign({},i),t.createElement("button",{onClick:o,title:l?s.exit||"Exit fullscreen":s.enter||"Enter fullscreen"},c&&!l&&c[0],c&&l&&c[1],!c&&!l&&t.createElement(P,{style:{width:"1em"}}),!c&&l&&t.createElement(G,{style:{width:"1em"}}))):null},e.SearchControl=({id:e,className:n,style:a,labels:r={}})=>{const c=i(),s=h(),{gotoNode:l}=b(),[o,u]=t.useState(""),[d,g]=t.useState([]),[f,m]=t.useState(null),[p,E]=t.useState("");t.useEffect((()=>{E(`search-${v()}`)}),[]),t.useEffect((()=>{const e=[];!f&&o.length>1&&c.getGraph().forEachNode(((t,n)=>{n.label&&n.label.toLowerCase().includes(o.toLowerCase())&&e.push({id:t,label:n.label})})),g(e)}),[o]),t.useEffect((()=>{s({clickStage:()=>{m(null),u("")}})}),[s]),t.useEffect((()=>{if(f)return c.getGraph().setNodeAttribute(f,"highlighted",!0),l(f),()=>{c.getGraph().setNodeAttribute(f,"highlighted",!1)}}),[f]);const w={className:`react-sigma-search ${n||""}`,id:e,style:a};return t.createElement("div",Object.assign({},w),t.createElement("label",{htmlFor:p,style:{display:"none"}},r.text||"Search a node"),t.createElement("input",{id:p,type:"text",placeholder:r.placeholder||"Search...",list:`${p}-datalist`,value:o,onChange:e=>{const t=e.target.value,n=d.find((e=>e.label===t));n?(u(n.label),g([]),m(n.id)):(m(null),u(t))}}),t.createElement("datalist",{id:`${p}-datalist`},d.map((e=>t.createElement("option",{key:e.id,value:e.label},e.label)))))},e.SigmaContainer=w,e.SigmaContext=s,e.SigmaProvider=l,e.ZoomControl=({className:e,style:n,animationDuration:a=200,children:r,labels:c={}})=>{const{zoomIn:s,zoomOut:l,reset:o}=b({duration:a,factor:1.5}),i={style:n,className:`react-sigma-control ${e||""}`};return t.createElement(t.Fragment,null,t.createElement("div",Object.assign({},i),t.createElement("button",{onClick:()=>s(),title:c.zoomIn||"Zoom In"},r?r[0]:t.createElement(_,{style:{width:"1em"}}))),t.createElement("div",Object.assign({},i),t.createElement("button",{onClick:()=>l(),title:c.zoomOut||"Zoom Out"},r?r[1]:t.createElement(k,{style:{width:"1em"}}))),t.createElement("div",Object.assign({},i),t.createElement("button",{onClick:()=>o(),title:c.reset||"See whole graph"},r?r[2]:t.createElement(H,{style:{width:"1em"}}))))},e.getUniqueKey=v,e.isEqual=p,e.useCamera=b,e.useFullScreen=E,e.useLoadGraph=function(){const e=i();return t.useCallback(((t,n=!0)=>{e&&t&&(n&&e.getGraph().order>0&&e.getGraph().clear(),e.getGraph().import(t),e.refresh())}),[e])},e.useRegisterEvents=h,e.useSetSettings=u,e.useSigma=i,e.useSigmaContext=o}));
//# sourceMappingURL=react-sigma_core.umd.min.js.map
